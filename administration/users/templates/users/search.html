{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h2>üîé Recherche de services publics</h2>
  <p>Profil s√©lectionn√© : <strong>{{ profil|title }}</strong></p>

  <form method="get" class="row g-3">
    <div class="col-md-4">
      <label class="form-label">Mot-cl√© :</label>
      <input type="text" name="q" class="form-control" value="{{ query }}">
    </div>

    <div class="col-md-3">
      <label class="form-label">Type d'administration :</label>
      <select name="type" class="form-select">
        <option value="">-- Choisir --</option>
        <option value="mairie">Mairie</option>
        <option value="prefecture">Pr√©fecture</option>
        <option value="caf">CAF</option>
        <option value="pole_emploi">P√¥le emploi</option>
        <option value="urssaf">URSSAF</option>
      </select>
    </div>

    <div class="col-md-3">
      <label class="form-label">Commune :</label>
      <input type="text" name="commune" class="form-control" placeholder="ex: Paris">
    </div>

    <div class="col-md-2 d-flex align-items-end">
      <button type="submit" class="btn btn-primary w-100">Rechercher</button>
    </div>
  </form>

  <hr>

  <h4>Suggestions pour {{ profil }}</h4>
  <ul>
    {% for s in suggestions %}
      <li>{{ s }}</li>
    {% endfor %}
  </ul>

  {% if services %}
  <div class="mt-4">
    <h4>R√©sultats de la recherche</h4>
    <div class="row">
      {% for service in services %}
        <div class="col-md-4 mb-3">
          <div class="card shadow-sm p-3">
            <h5>{{ service.nom }}</h5>
            <p>{{ service.type }}</p>
            <p>{{ service.adresse }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
  {% else %}
    <p>Aucun r√©sultat pour le moment.</p>
  {% endif %}
</div>
{% endblock %}
